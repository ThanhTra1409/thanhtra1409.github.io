<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Java NIO ‚Äî High Performance Network Programming - Nguy·ªÖn Thanh Tr√†</title>
  <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üë®‚Äçüíª</text></svg>">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body data-lang="en">
  <div class="overlay" id="overlay">
    <ul class="menu">
      <li><a href="/" data-i18n="home">Home</a></li>
      <li><a href="/posts/" data-i18n="blog">Blog</a></li>
      <li><a href="/about/" data-i18n="about">About</a></li>
    </ul>
  </div>
  <header>
    <nav>
      <div class="brand"><a href="/" data-i18n="site-title">Nguy·ªÖn Thanh Tr√†</a></div>
      <ul>
        <li><a href="/" data-i18n="home">Home</a></li>
        <li><a href="/posts/" data-i18n="blog">Blog</a></li>
        <li><a href="/about/" data-i18n="about">About</a></li>
        <li class="lang-toggle-wrapper">
          <div id="lang-switch" class="lang-switch" data-lang="en">
            <div class="lang-switch-slider"></div>
            <button id="lang-vn" class="lang-btn">VN</button>
            <button id="lang-en" class="lang-btn">EN</button>
          </div>
        </li>
      </ul>
      <div class="menu-toggle" onclick="toggleMenu()" aria-label="menu">‚ò∞</div>
    </nav>
  </header>
  <main>
    <article class="post">
      <h1>Java NIO ‚Äî High Performance Network Programming</h1>
      <p class="meta">2025-12-03</p>
      <div class="featured-image"><img src="https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=800&auto=format&fit=crop" alt="Java NIO ‚Äî l·∫≠p tr√¨nh m·∫°ng hi·ªáu nƒÉng cao"></div>
      <p>In previous articles, we learned about basic Sockets and multithreaded servers. However, with the thread-per-connection model, when the number of connections increases to thousands, the system will face performance and resource issues.</p>
<p>Java NIO (New I/O or Non-blocking I/O) was introduced in Java 1.4 to solve this problem. NIO allows a thread to handle multiple connections simultaneously through non-blocking I/O mechanisms, helping build highly scalable servers.</p>
<img src="https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=1200&auto=format&fit=crop" alt="Java NIO Architecture" style="max-width: 100%; height: auto; border-radius: 8px; margin: 20px 0;">
<h3>1. Differences Between I/O and NIO</h3>
<p><strong>Blocking I/O (java.io)</strong>:<br/>- One thread handles one connection only<br/>- Thread blocks when reading/writing data<br/>- Not efficient with many connections</p>
<p><strong>Non-blocking I/O (java.nio)</strong>:<br/>- One thread can handle multiple connections<br/>- Not blocked when no data available<br/>- Uses Selector to monitor multiple Channels</p>
<h3>2. Main Components of NIO</h3>
<p><strong>Channel</strong>: Channel for reading/writing data, similar to Stream but supports both reading and writing.</p>
<p><strong>Buffer</strong>: Memory area for temporarily storing data. Must read/write data through Buffer.</p>
<p><strong>Selector</strong>: Allows a thread to monitor multiple Channels and handle I/O events.</p>
<img src="https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=1000&auto=format&fit=crop" alt="NIO Components" style="max-width: 100%; height: auto; border-radius: 8px; margin: 20px 0;">
<h3>3. Building an NIO Server</h3>
<p>```java<br/>import java.io.IOException;<br/>import java.net.InetSocketAddress;<br/>import java.nio.ByteBuffer;<br/>import java.nio.channels.*;<br/>import java.util.Iterator;<br/>import java.util.Set;</p>
<p>public class NIOServer {<br/>    private static final int PORT = 8080;<br/>    private static final int BUFFER_SIZE = 256;</p>
<p>public static void main(String[] args) {<br/>        try {<br/>            // Open ServerSocketChannel<br/>            ServerSocketChannel serverChannel = ServerSocketChannel.open();<br/>            serverChannel.bind(new InetSocketAddress(PORT));<br/>            serverChannel.configureBlocking(false);</p>
<p>// Create Selector<br/>            Selector selector = Selector.open();</p>
<p>// Register ServerSocketChannel with Selector<br/>            serverChannel.register(selector, SelectionKey.OP_ACCEPT);</p>
<p>System.out.println("NIO Server running on port " + PORT);</p>
<p>ByteBuffer buffer = ByteBuffer.allocate(BUFFER_SIZE);</p>
<p>while (true) {<br/>                // Wait for I/O events<br/>                selector.select();</p>
<p>// Get ready keys<br/>                Set<SelectionKey> selectedKeys = selector.selectedKeys();<br/>                Iterator<SelectionKey> iterator = selectedKeys.iterator();</p>
<p>while (iterator.hasNext()) {<br/>                    SelectionKey key = iterator.next();<br/>                    iterator.remove();</p>
<p>if (key.isAcceptable()) {<br/>                        // Accept new connection<br/>                        handleAccept(serverChannel, selector);<br/>                    } else if (key.isReadable()) {<br/>                        // Read data<br/>                        handleRead(key, buffer);<br/>                    }<br/>                }<br/>            }<br/>        } catch (IOException e) {<br/>            e.printStackTrace();<br/>        }<br/>    }</p>
<p>private static void handleAccept(ServerSocketChannel serverChannel, <br/>                                    Selector selector) throws IOException {<br/>        SocketChannel clientChannel = serverChannel.accept();<br/>        clientChannel.configureBlocking(false);<br/>        clientChannel.register(selector, SelectionKey.OP_READ);<br/>        System.out.println("Client connected: " + clientChannel.getRemoteAddress());<br/>    }</p>
<p>private static void handleRead(SelectionKey key, ByteBuffer buffer) <br/>                                  throws IOException {<br/>        SocketChannel clientChannel = (SocketChannel) key.channel();<br/>        buffer.clear();</p>
<p>int bytesRead = clientChannel.read(buffer);</p>
<p>if (bytesRead == -1) {<br/>            // Client closed connection<br/>            clientChannel.close();<br/>            System.out.println("Client disconnected");<br/>            return;<br/>        }</p>
<p>if (bytesRead > 0) {<br/>            buffer.flip();<br/>            byte[] data = new byte[buffer.remaining()];<br/>            buffer.get(data);<br/>            String message = new String(data);</p>
<p>System.out.println("Received: " + message);</p>
<p>// Echo back to client<br/>            buffer.rewind();<br/>            clientChannel.write(buffer);<br/>        }<br/>    }<br/>}<br/>```</p>
<h3>4. Working with ByteBuffer</h3>
<p>ByteBuffer has important properties:</p>
<p>- <strong>capacity</strong>: Maximum size of buffer<br/>- <strong>position</strong>: Current position<br/>- <strong>limit</strong>: Read/write limit</p>
<p>```java<br/>ByteBuffer buffer = ByteBuffer.allocate(1024);</p>
<p>// Write data to buffer<br/>buffer.put("Hello".getBytes());</p>
<p>// Switch from write mode to read mode<br/>buffer.flip();</p>
<p>// Read data from buffer<br/>while (buffer.hasRemaining()) {<br/>    byte b = buffer.get();<br/>}</p>
<p>// Clear buffer to write again<br/>buffer.clear();</p>
<p>// Or compact to keep unread data<br/>buffer.compact();<br/>```</p>
<h3>5. NIO Client</h3>
<p>```java<br/>import java.io.IOException;<br/>import java.net.InetSocketAddress;<br/>import java.nio.ByteBuffer;<br/>import java.nio.channels.SocketChannel;</p>
<p>public class NIOClient {<br/>    public static void main(String[] args) {<br/>        try {<br/>            SocketChannel socketChannel = SocketChannel.open();<br/>            socketChannel.connect(new InetSocketAddress("localhost", 8080));</p>
<p>// Send data<br/>            String message = "Hello from NIO Client";<br/>            ByteBuffer buffer = ByteBuffer.wrap(message.getBytes());<br/>            socketChannel.write(buffer);</p>
<p>// Receive response<br/>            buffer.clear();<br/>            int bytesRead = socketChannel.read(buffer);</p>
<p>if (bytesRead > 0) {<br/>                buffer.flip();<br/>                byte[] data = new byte[buffer.remaining()];<br/>                buffer.get(data);<br/>                System.out.println("Received: " + new String(data));<br/>            }</p>
<p>socketChannel.close();<br/>        } catch (IOException e) {<br/>            e.printStackTrace();<br/>        }<br/>    }<br/>}<br/>```</p>
<h3>6. Advantages and Disadvantages</h3>
<p><strong>Advantages</strong>:<br/>- Handle many connections with few threads<br/>- High performance with many concurrent connections<br/>- Save system resources</p>
<p><strong>Disadvantages</strong>:<br/>- More complex code than blocking I/O<br/>- Difficult to debug and maintain<br/>- Need deep understanding of Buffer and Channel</p>
<h3>7. When to Use NIO?</h3>
<p>- Server needs to handle thousands of concurrent connections<br/>- Connections have low traffic (chat, notifications)<br/>- Need to optimize system resources</p>
<p>Don't use NIO when:<br/>- Few connections (under 100)<br/>- Complex processing logic for each connection<br/>- Team lacks experience with NIO</p>
<p>Java NIO is a powerful tool for building high-performance servers capable of handling thousands of concurrent connections. However, with its complexity, you should consider using frameworks like Netty or Vert.x, built on NIO foundation but providing easier-to-use APIs.</p>
<p>In the next articles, we'll move to JavaScript and Node.js, exploring how to build servers with Node's natural event-driven model.</p>
<p>---</p>
<h3>References</h3>
<p>- [Oracle Java NIO Tutorial](https://docs.oracle.com/javase/tutorial/essential/io/nio.html)<br/>- [Java NIO Selector](https://docs.oracle.com/javase/8/docs/api/java/nio/channels/Selector.html)<br/>- [Guide to Java NIO](https://www.baeldung.com/java-nio-selector)<br/>- [Java NIO vs IO](https://jenkov.com/tutorials/java-nio/nio-vs-io.html)</p>
    </article>
    <section class="social-section">
      <div class="social-container">
        <h2 data-i18n="social-title">X&#227; h&#7897;i</h2>
        <div class="social-grid">
          <a href="https://github.com/ThanhTra1409" target="_blank" class="social-card">
            <i class="fab fa-github social-icon"></i>
            <h3>GitHub</h3>
            <p>@nttra204</p>
          </a>
          <a href="https://www.facebook.com/nguyen.thanh.tra.970568?locale=vi_VN" target="_blank" class="social-card">
            <i class="fab fa-facebook social-icon"></i>
            <h3>Facebook</h3>
            <p>Nguy&#7877;n Thanh Tr&#224;</p>
          </a>
          <a href="https://www.instagram.com/nttra204_/?igsh=MXVlc3p1NG4zdnBidw%3D%3D&utm_source=qr" target="_blank" class="social-card">
            <i class="fab fa-instagram social-icon"></i>
            <h3>Instagram</h3>
            <p>@nttra204_</p>
          </a>
          <a href="https://www.linkedin.com/in/thanh-tra-nguyen-84a46833a" target="_blank" class="social-card">
            <i class="fab fa-linkedin social-icon"></i>
            <h3>LinkedIn</h3>
            <p>Nguy&#7877;n Thanh Tr&#224;</p>
          </a>
        </div>
      </div>
    </section>
  </main>
  <footer>
    <div class="footer-content">
      <div class="footer-brand">
        <h3 data-i18n="site-title">Nguy·ªÖn Thanh Tr√†</h3>
        <p class="footer-tagline" data-i18n="footer-tagline">Building scalable solutions with passion</p>
      </div>
      <div class="footer-contact">
        <h4 data-i18n="contact-info">Th&#244;ng tin li&#234;n h&#7879;</h4>
        <div class="contact-info-grid">
          <div class="contact-info-item">
            <i class="fas fa-envelope"></i>
            <a href="mailto:ntra140924@gmail.com">ntra140924@gmail.com</a>
          </div>
          <div class="contact-info-item">
            <i class="fas fa-phone"></i>
            <a href="tel:0941779093">0941779093</a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p><span data-i18n="footer-copyright">¬© 2025</span> <span data-i18n="site-title">Nguy·ªÖn Thanh Tr√†</span></p>
      </div>
    </div>
  </footer>
  <script src="/js/i18n.js"></script>
  <script>
  function toggleMenu(){
    document.body.classList.toggle('menu-open');
  }
  </script>
</body>
</html>