<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Java NIO ‚Äî l·∫≠p tr√¨nh m·∫°ng hi·ªáu nƒÉng cao - Nguy·ªÖn Thanh Tr√†</title>
  <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üë®‚Äçüíª</text></svg>">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
  <div class="overlay" id="overlay">
    <ul class="menu">
      <li><a href="/" data-i18n="home">Home</a></li>
      <li><a href="/posts/" data-i18n="blog">Blog</a></li>
      <li><a href="/about/" data-i18n="about">About</a></li>
    </ul>
  </div>
  <header>
    <nav>
      <div class="brand"><a href="/" data-i18n="site-title">Nguy·ªÖn Thanh Tr√†</a></div>
      <ul>
        <li><a href="/" data-i18n="home">Home</a></li>
        <li><a href="/posts/" data-i18n="blog">Blog</a></li>
        <li><a href="/about/" data-i18n="about">About</a></li>
        <li class="lang-toggle-wrapper">
          <div id="lang-switch" class="lang-switch" data-lang="vi">
            <div class="lang-switch-slider"></div>
            <button id="lang-vn" class="lang-btn">VN</button>
            <button id="lang-en" class="lang-btn">EN</button>
          </div>
        </li>
      </ul>
      <div class="menu-toggle" onclick="toggleMenu()" aria-label="menu">‚ò∞</div>
    </nav>
  </header>
  <main>
    <article class="post">
      <h1>Java NIO ‚Äî l·∫≠p tr√¨nh m·∫°ng hi·ªáu nƒÉng cao</h1>
      <p class="meta">2025-12-03</p>
      <div class="featured-image"><img src="https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=800&auto=format&fit=crop" alt="Java NIO ‚Äî l·∫≠p tr√¨nh m·∫°ng hi·ªáu nƒÉng cao"></div>
      <p>Trong c√°c b√†i tr∆∞·ªõc, ch√∫ng ta ƒë√£ t√¨m hi·ªÉu v·ªÅ Socket c∆° b·∫£n v√† multithreading server. Tuy nhi√™n, v·ªõi m√¥ h√¨nh thread-per-connection, khi s·ªë l∆∞·ª£ng k·∫øt n·ªëi tƒÉng l√™n h√†ng ngh√¨n, h·ªá th·ªëng s·∫Ω g·∫∑p v·∫•n ƒë·ªÅ v·ªÅ hi·ªáu su·∫•t v√† t√†i nguy√™n.</p>
<p>Java NIO (New I/O ho·∫∑c Non-blocking I/O) ƒë∆∞·ª£c gi·ªõi thi·ªáu t·ª´ Java 1.4 ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y. NIO cho ph√©p m·ªôt thread x·ª≠ l√Ω nhi·ªÅu k·∫øt n·ªëi ƒë·ªìng th·ªùi th√¥ng qua c∆° ch·∫ø non-blocking I/O, gi√∫p x√¢y d·ª±ng server c√≥ kh·∫£ nƒÉng m·ªü r·ªông cao.</p>
<img src="https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=1200&auto=format&fit=crop" alt="Java NIO Architecture" style="max-width: 100%; height: auto; border-radius: 8px; margin: 20px 0;">
<h3>1. S·ª± kh√°c bi·ªát gi·ªØa I/O v√† NIO</h3>
<p><strong>Blocking I/O (java.io)</strong>:<br/>- M·ªôt thread ch·ªâ x·ª≠ l√Ω m·ªôt k·∫øt n·ªëi<br/>- Thread b·ªã block khi ƒë·ªçc/ghi d·ªØ li·ªáu<br/>- Kh√¥ng hi·ªáu qu·∫£ v·ªõi nhi·ªÅu k·∫øt n·ªëi</p>
<p><strong>Non-blocking I/O (java.nio)</strong>:<br/>- M·ªôt thread c√≥ th·ªÉ x·ª≠ l√Ω nhi·ªÅu k·∫øt n·ªëi<br/>- Kh√¥ng b·ªã block khi kh√¥ng c√≥ d·ªØ li·ªáu<br/>- S·ª≠ d·ª•ng Selector ƒë·ªÉ gi√°m s√°t nhi·ªÅu Channel</p>
<h3>2. C√°c th√†nh ph·∫ßn ch√≠nh c·ªßa NIO</h3>
<p><strong>Channel</strong>: K√™nh ƒë·ªçc/ghi d·ªØ li·ªáu, t∆∞∆°ng t·ª± nh∆∞ Stream nh∆∞ng h·ªó tr·ª£ c·∫£ ƒë·ªçc v√† ghi.</p>
<p><strong>Buffer</strong>: V√πng nh·ªõ ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu t·∫°m th·ªùi. Ph·∫£i ƒë·ªçc/ghi d·ªØ li·ªáu qua Buffer.</p>
<p><strong>Selector</strong>: Cho ph√©p m·ªôt thread gi√°m s√°t nhi·ªÅu Channel v√† x·ª≠ l√Ω c√°c s·ª± ki·ªán I/O.</p>
<img src="https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=1000&auto=format&fit=crop" alt="NIO Components" style="max-width: 100%; height: auto; border-radius: 8px; margin: 20px 0;">
<h3>3. X√¢y d·ª±ng NIO Server</h3>
<p>```java<br/>import java.io.IOException;<br/>import java.net.InetSocketAddress;<br/>import java.nio.ByteBuffer;<br/>import java.nio.channels.*;<br/>import java.util.Iterator;<br/>import java.util.Set;</p>
<p>public class NIOServer {<br/>    private static final int PORT = 8080;<br/>    private static final int BUFFER_SIZE = 256;</p>
<p>public static void main(String[] args) {<br/>        try {<br/>            // M·ªü ServerSocketChannel<br/>            ServerSocketChannel serverChannel = ServerSocketChannel.open();<br/>            serverChannel.bind(new InetSocketAddress(PORT));<br/>            serverChannel.configureBlocking(false);</p>
<p>// T·∫°o Selector<br/>            Selector selector = Selector.open();</p>
<p>// ƒêƒÉng k√Ω ServerSocketChannel v·ªõi Selector<br/>            serverChannel.register(selector, SelectionKey.OP_ACCEPT);</p>
<p>System.out.println("NIO Server ƒëang ch·∫°y tr√™n port " + PORT);</p>
<p>ByteBuffer buffer = ByteBuffer.allocate(BUFFER_SIZE);</p>
<p>while (true) {<br/>                // Ch·ªù s·ª± ki·ªán I/O<br/>                selector.select();</p>
<p>// L·∫•y c√°c key ƒë√£ s·∫µn s√†ng<br/>                Set<SelectionKey> selectedKeys = selector.selectedKeys();<br/>                Iterator<SelectionKey> iterator = selectedKeys.iterator();</p>
<p>while (iterator.hasNext()) {<br/>                    SelectionKey key = iterator.next();<br/>                    iterator.remove();</p>
<p>if (key.isAcceptable()) {<br/>                        // Ch·∫•p nh·∫≠n k·∫øt n·ªëi m·ªõi<br/>                        handleAccept(serverChannel, selector);<br/>                    } else if (key.isReadable()) {<br/>                        // ƒê·ªçc d·ªØ li·ªáu<br/>                        handleRead(key, buffer);<br/>                    }<br/>                }<br/>            }<br/>        } catch (IOException e) {<br/>            e.printStackTrace();<br/>        }<br/>    }</p>
<p>private static void handleAccept(ServerSocketChannel serverChannel, <br/>                                    Selector selector) throws IOException {<br/>        SocketChannel clientChannel = serverChannel.accept();<br/>        clientChannel.configureBlocking(false);<br/>        clientChannel.register(selector, SelectionKey.OP_READ);<br/>        System.out.println("Client k·∫øt n·ªëi: " + clientChannel.getRemoteAddress());<br/>    }</p>
<p>private static void handleRead(SelectionKey key, ByteBuffer buffer) <br/>                                  throws IOException {<br/>        SocketChannel clientChannel = (SocketChannel) key.channel();<br/>        buffer.clear();</p>
<p>int bytesRead = clientChannel.read(buffer);</p>
<p>if (bytesRead == -1) {<br/>            // Client ƒë√≥ng k·∫øt n·ªëi<br/>            clientChannel.close();<br/>            System.out.println("Client ng·∫Øt k·∫øt n·ªëi");<br/>            return;<br/>        }</p>
<p>if (bytesRead > 0) {<br/>            buffer.flip();<br/>            byte[] data = new byte[buffer.remaining()];<br/>            buffer.get(data);<br/>            String message = new String(data);</p>
<p>System.out.println("Nh·∫≠n: " + message);</p>
<p>// Echo v·ªÅ client<br/>            buffer.rewind();<br/>            clientChannel.write(buffer);<br/>        }<br/>    }<br/>}<br/>```</p>
<h3>4. L√†m vi·ªác v·ªõi ByteBuffer</h3>
<p>ByteBuffer c√≥ c√°c thu·ªôc t√≠nh quan tr·ªçng:</p>
<p>- <strong>capacity</strong>: K√≠ch th∆∞·ªõc t·ªëi ƒëa c·ªßa buffer<br/>- <strong>position</strong>: V·ªã tr√≠ hi·ªán t·∫°i<br/>- <strong>limit</strong>: Gi·ªõi h·∫°n ƒë·ªçc/ghi</p>
<p>```java<br/>ByteBuffer buffer = ByteBuffer.allocate(1024);</p>
<p>// Ghi d·ªØ li·ªáu v√†o buffer<br/>buffer.put("Hello".getBytes());</p>
<p>// Chuy·ªÉn t·ª´ write mode sang read mode<br/>buffer.flip();</p>
<p>// ƒê·ªçc d·ªØ li·ªáu t·ª´ buffer<br/>while (buffer.hasRemaining()) {<br/>    byte b = buffer.get();<br/>}</p>
<p>// X√≥a buffer ƒë·ªÉ ghi l·∫°i<br/>buffer.clear();</p>
<p>// Ho·∫∑c compact ƒë·ªÉ gi·ªØ d·ªØ li·ªáu ch∆∞a ƒë·ªçc<br/>buffer.compact();<br/>```</p>
<h3>5. NIO Client</h3>
<p>```java<br/>import java.io.IOException;<br/>import java.net.InetSocketAddress;<br/>import java.nio.ByteBuffer;<br/>import java.nio.channels.SocketChannel;</p>
<p>public class NIOClient {<br/>    public static void main(String[] args) {<br/>        try {<br/>            SocketChannel socketChannel = SocketChannel.open();<br/>            socketChannel.connect(new InetSocketAddress("localhost", 8080));</p>
<p>// G·ª≠i d·ªØ li·ªáu<br/>            String message = "Hello from NIO Client";<br/>            ByteBuffer buffer = ByteBuffer.wrap(message.getBytes());<br/>            socketChannel.write(buffer);</p>
<p>// Nh·∫≠n ph·∫£n h·ªìi<br/>            buffer.clear();<br/>            int bytesRead = socketChannel.read(buffer);</p>
<p>if (bytesRead > 0) {<br/>                buffer.flip();<br/>                byte[] data = new byte[buffer.remaining()];<br/>                buffer.get(data);<br/>                System.out.println("Nh·∫≠n: " + new String(data));<br/>            }</p>
<p>socketChannel.close();<br/>        } catch (IOException e) {<br/>            e.printStackTrace();<br/>        }<br/>    }<br/>}<br/>```</p>
<h3>6. ∆Øu ƒëi·ªÉm v√† nh∆∞·ª£c ƒëi·ªÉm</h3>
<p><strong>∆Øu ƒëi·ªÉm</strong>:<br/>- X·ª≠ l√Ω nhi·ªÅu k·∫øt n·ªëi v·ªõi √≠t thread<br/>- Hi·ªáu su·∫•t cao v·ªõi nhi·ªÅu k·∫øt n·ªëi ƒë·ªìng th·ªùi<br/>- Ti·∫øt ki·ªám t√†i nguy√™n h·ªá th·ªëng</p>
<p><strong>Nh∆∞·ª£c ƒëi·ªÉm</strong>:<br/>- Code ph·ª©c t·∫°p h∆°n blocking I/O<br/>- Kh√≥ debug v√† maintain<br/>- C·∫ßn hi·ªÉu r√µ v·ªÅ Buffer v√† Channel</p>
<h3>7. Khi n√†o n√™n d√πng NIO?</h3>
<p>- Server c·∫ßn x·ª≠ l√Ω h√†ng ngh√¨n k·∫øt n·ªëi ƒë·ªìng th·ªùi<br/>- C√°c k·∫øt n·ªëi c√≥ l∆∞u l∆∞·ª£ng th·∫•p (chat, notification)<br/>- C·∫ßn t·ªëi ∆∞u t√†i nguy√™n h·ªá th·ªëng</p>
<p>Kh√¥ng n√™n d√πng NIO khi:<br/>- S·ªë l∆∞·ª£ng k·∫øt n·ªëi √≠t (d∆∞·ªõi 100)<br/>- X·ª≠ l√Ω logic ph·ª©c t·∫°p cho m·ªói k·∫øt n·ªëi<br/>- Team thi·∫øu kinh nghi·ªám v·ªõi NIO</p>
<p>Java NIO l√† c√¥ng c·ª• m·∫°nh m·∫Ω ƒë·ªÉ x√¢y d·ª±ng server hi·ªáu nƒÉng cao, c√≥ kh·∫£ nƒÉng x·ª≠ l√Ω h√†ng ngh√¨n k·∫øt n·ªëi ƒë·ªìng th·ªùi. Tuy nhi√™n, v·ªõi s·ª± ph·ª©c t·∫°p c·ªßa n√≥, b·∫°n n√™n c√¢n nh·∫Øc s·ª≠ d·ª•ng c√°c framework nh∆∞ Netty ho·∫∑c Vert.x, ƒë∆∞·ª£c x√¢y d·ª±ng tr√™n n·ªÅn t·∫£ng NIO nh∆∞ng cung c·∫•p API d·ªÖ s·ª≠ d·ª•ng h∆°n.</p>
<p>Trong c√°c b√†i ti·∫øp theo, ch√∫ng ta s·∫Ω chuy·ªÉn sang JavaScript v√† Node.js, t√¨m hi·ªÉu c√°ch x√¢y d·ª±ng server v·ªõi event-driven model t·ª± nhi√™n c·ªßa Node.</p>
<p>---</p>
<h3>T√†i li·ªáu tham kh·∫£o</h3>
<p>- [Oracle Java NIO Tutorial](https://docs.oracle.com/javase/tutorial/essential/io/nio.html)<br/>- [Java NIO Selector](https://docs.oracle.com/javase/8/docs/api/java/nio/channels/Selector.html)<br/>- [Guide to Java NIO](https://www.baeldung.com/java-nio-selector)<br/>- [Java NIO vs IO](https://jenkov.com/tutorials/java-nio/nio-vs-io.html)</p>
    </article>
    <section class="social-section">
      <div class="social-container">
        <h2 data-i18n="social-title">X&#227; h&#7897;i</h2>
        <div class="social-grid">
          <a href="https://github.com/ThanhTra1409" target="_blank" class="social-card">
            <i class="fab fa-github social-icon"></i>
            <h3>GitHub</h3>
            <p>@nttra204</p>
          </a>
          <a href="https://www.facebook.com/nguyen.thanh.tra.970568?locale=vi_VN" target="_blank" class="social-card">
            <i class="fab fa-facebook social-icon"></i>
            <h3>Facebook</h3>
            <p>Nguy&#7877;n Thanh Tr&#224;</p>
          </a>
          <a href="https://www.instagram.com/nttra204_/?igsh=MXVlc3p1NG4zdnBidw%3D%3D&utm_source=qr" target="_blank" class="social-card">
            <i class="fab fa-instagram social-icon"></i>
            <h3>Instagram</h3>
            <p>@nttra204_</p>
          </a>
          <a href="https://www.linkedin.com/in/thanh-tra-nguyen-84a46833a" target="_blank" class="social-card">
            <i class="fab fa-linkedin social-icon"></i>
            <h3>LinkedIn</h3>
            <p>Nguy&#7877;n Thanh Tr&#224;</p>
          </a>
        </div>
      </div>
    </section>
  </main>
  <footer>
    <div class="footer-content">
      <div class="footer-brand">
        <h3 data-i18n="site-title">Nguy·ªÖn Thanh Tr√†</h3>
        <p class="footer-tagline" data-i18n="footer-tagline">Building scalable solutions with passion</p>
      </div>
      <div class="footer-contact">
        <h4 data-i18n="contact-info">Th&#244;ng tin li&#234;n h&#7879;</h4>
        <div class="contact-info-grid">
          <div class="contact-info-item">
            <i class="fas fa-envelope"></i>
            <a href="mailto:ntra140924@gmail.com">ntra140924@gmail.com</a>
          </div>
          <div class="contact-info-item">
            <i class="fas fa-phone"></i>
            <a href="tel:0941779093">0941779093</a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p><span data-i18n="footer-copyright">¬© 2025</span> <span data-i18n="site-title">Nguy·ªÖn Thanh Tr√†</span></p>
      </div>
    </div>
  </footer>
  <script src="/js/i18n.js"></script>
  <script>
  function toggleMenu(){
    document.body.classList.toggle('menu-open');
  }
  </script>
</body>
</html>