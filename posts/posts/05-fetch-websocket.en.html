<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Fetch API and WebSocket in the Browser - Nguy·ªÖn Thanh Tr√†</title>
  <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üë®‚Äçüíª</text></svg>">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body data-lang="en">
  <div class="overlay" id="overlay">
    <ul class="menu">
      <li><a href="/" data-i18n="home">Home</a></li>
      <li><a href="/posts/" data-i18n="blog">Blog</a></li>
      <li><a href="/about/" data-i18n="about">About</a></li>
    </ul>
  </div>
  <header>
    <nav>
      <div class="brand"><a href="/" data-i18n="site-title">Nguy·ªÖn Thanh Tr√†</a></div>
      <ul>
        <li><a href="/" data-i18n="home">Home</a></li>
        <li><a href="/posts/" data-i18n="blog">Blog</a></li>
        <li><a href="/about/" data-i18n="about">About</a></li>
        <li class="lang-toggle-wrapper">
          <div id="lang-switch" class="lang-switch" data-lang="en">
            <div class="lang-switch-slider"></div>
            <button id="lang-vn" class="lang-btn">VN</button>
            <button id="lang-en" class="lang-btn">EN</button>
          </div>
        </li>
      </ul>
      <div class="menu-toggle" onclick="toggleMenu()" aria-label="menu">‚ò∞</div>
    </nav>
  </header>
  <main>
    <article class="post">
      <h1>Fetch API and WebSocket in the Browser</h1>
      <p class="meta">2025-12-07</p>
      <div class="featured-image"><img src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=800&auto=format&fit=crop" alt="Fetch API v√† WebSocket tr√™n tr√¨nh duy·ªát"></div>
      <p>In modern web development, communication between client and server is essential. JavaScript provides two main tools: <strong>Fetch API</strong> for regular HTTP requests and <strong>WebSocket</strong> for bidirectional realtime communication.</p>
<p>This article will introduce both technologies, distinguish when to use which, and how to use them in real applications.</p>
<img src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=1200&auto=format&fit=crop" alt="Web Communication" style="max-width: 100%; height: auto; border-radius: 8px; margin: 20px 0;">
<h3>1. Fetch API - Modern HTTP Requests</h3>
<p>Fetch API replaces the old XMLHttpRequest, providing simpler syntax and using Promises.</p>
<h4>Basic GET Request</h4>
<p>```javascript<br/>// Simple GET request<br/>fetch('https://jsonplaceholder.typicode.com/posts/1')<br/>  .then(response => response.json())<br/>  .then(data => console.log(data))<br/>  .catch(error => console.error('Error:', error));</p>
<p>// Using async/await<br/>async function fetchPost() {<br/>  try {<br/>    const response = await fetch(<br/>      'https://jsonplaceholder.typicode.com/posts/1'<br/>    );</p>
<p>if (!response.ok) {<br/>      throw new Error(<code>HTTP error! status: ${response.status}</code>);<br/>    }</p>
<p>const data = await response.json();<br/>    console.log(data);<br/>  } catch (error) {<br/>    console.error('Error:', error);<br/>  }<br/>}</p>
<p>fetchPost();<br/>```</p>
<h4>POST Request with JSON</h4>
<p>```javascript<br/>async function createPost() {<br/>  try {<br/>    const response = await fetch(<br/>      'https://jsonplaceholder.typicode.com/posts',<br/>      {<br/>        method: 'POST',<br/>        headers: {<br/>          'Content-Type': 'application/json',<br/>        },<br/>        body: JSON.stringify({<br/>          title: 'New Post',<br/>          body: 'Post content',<br/>          userId: 1<br/>        })<br/>      }<br/>    );</p>
<p>const data = await response.json();<br/>    console.log('Created successfully:', data);<br/>  } catch (error) {<br/>    console.error('Error:', error);<br/>  }<br/>}<br/>```</p>
<h4>Handling Headers and Authentication</h4>
<p>```javascript<br/>async function fetchWithAuth() {<br/>  const response = await fetch('https://api.example.com/data', {<br/>    method: 'GET',<br/>    headers: {<br/>      'Authorization': 'Bearer YOUR_TOKEN',<br/>      'Content-Type': 'application/json'<br/>    }<br/>  });</p>
<p>// Read headers from response<br/>  console.log('Content-Type:', response.headers.get('Content-Type'));</p>
<p>return await response.json();<br/>}<br/>```</p>
<h4>File Upload</h4>
<p>```javascript<br/>async function uploadFile(file) {<br/>  const formData = new FormData();<br/>  formData.append('file', file);<br/>  formData.append('description', 'File description');</p>
<p>try {<br/>    const response = await fetch('https://api.example.com/upload', {<br/>      method: 'POST',<br/>      body: formData<br/>      // Don't set Content-Type, browser sets it automatically<br/>    });</p>
<p>const result = await response.json();<br/>    console.log('Upload successful:', result);<br/>  } catch (error) {<br/>    console.error('Upload error:', error);<br/>  }<br/>}</p>
<p>// Usage<br/>const fileInput = document.querySelector('input[type="file"]');<br/>fileInput.addEventListener('change', (e) => {<br/>  const file = e.target.files[0];<br/>  if (file) {<br/>    uploadFile(file);<br/>  }<br/>});<br/>```</p>
<h3>2. WebSocket - Realtime Communication</h3>
<p>WebSocket provides a bidirectional, full-duplex communication channel between client and server.</p>
<h4>Basic WebSocket Connection</h4>
<p>```javascript<br/>// Create WebSocket connection<br/>const ws = new WebSocket('ws://localhost:8080');</p>
<p>// Event when connection successful<br/>ws.onopen = (event) => {<br/>  console.log('WebSocket connection successful');<br/>  ws.send('Hello server!');<br/>};</p>
<p>// Event when receiving message<br/>ws.onmessage = (event) => {<br/>  console.log('Received message:', event.data);<br/>};</p>
<p>// Event when error occurs<br/>ws.onerror = (error) => {<br/>  console.error('WebSocket error:', error);<br/>};</p>
<p>// Event when disconnected<br/>ws.onclose = (event) => {<br/>  console.log('Connection closed. Code:', event.code);<br/>};</p>
<p>// Send message<br/>function sendMessage(message) {<br/>  if (ws.readyState === WebSocket.OPEN) {<br/>    ws.send(message);<br/>  } else {<br/>    console.error('WebSocket not ready');<br/>  }<br/>}</p>
<p>// Close connection<br/>function closeConnection() {<br/>  ws.close();<br/>}<br/>```</p>
<h4>Simple Chat Application</h4>
<p>```javascript<br/>class ChatClient {<br/>  constructor(url) {<br/>    this.ws = new WebSocket(url);<br/>    this.setupEventHandlers();<br/>  }</p>
<p>setupEventHandlers() {<br/>    this.ws.onopen = () => {<br/>      console.log('Chat connection successful');<br/>      this.updateStatus('online');<br/>    };</p>
<p>this.ws.onmessage = (event) => {<br/>      const message = JSON.parse(event.data);<br/>      this.displayMessage(message);<br/>    };</p>
<p>this.ws.onerror = (error) => {<br/>      console.error('Error:', error);<br/>      this.updateStatus('error');<br/>    };</p>
<p>this.ws.onclose = () => {<br/>      console.log('Disconnected');<br/>      this.updateStatus('offline');<br/>      // Auto reconnect after 5 seconds<br/>      setTimeout(() => this.reconnect(), 5000);<br/>    };<br/>  }</p>
<p>sendMessage(text, username) {<br/>    const message = {<br/>      type: 'message',<br/>      username: username,<br/>      text: text,<br/>      timestamp: new Date().toISOString()<br/>    };</p>
<p>this.ws.send(JSON.stringify(message));<br/>  }</p>
<p>displayMessage(message) {<br/>    const messageDiv = document.createElement('div');<br/>    messageDiv.className = 'message';<br/>    messageDiv.innerHTML = <code><br/>      <strong>${message.username}</strong>: ${message.text}<br/>      <span class="time">${new Date(message.timestamp).toLocaleTimeString()}</span><br/>    </code>;</p>
<p>document.getElementById('messages').appendChild(messageDiv);<br/>  }</p>
<p>updateStatus(status) {<br/>    const statusEl = document.getElementById('status');<br/>    statusEl.textContent = status;<br/>    statusEl.className = <code>status-${status}</code>;<br/>  }</p>
<p>reconnect() {<br/>    console.log('Reconnecting...');<br/>    this.ws = new WebSocket(this.ws.url);<br/>    this.setupEventHandlers();<br/>  }<br/>}</p>
<p>// Usage<br/>const chat = new ChatClient('ws://localhost:8080');</p>
<p>document.getElementById('sendBtn').addEventListener('click', () => {<br/>  const input = document.getElementById('messageInput');<br/>  const username = document.getElementById('username').value;</p>
<p>if (input.value.trim()) {<br/>    chat.sendMessage(input.value, username);<br/>    input.value = '';<br/>  }<br/>});<br/>```</p>
<h4>Sending/Receiving Binary Data</h4>
<p>```javascript<br/>// Send binary data<br/>const buffer = new ArrayBuffer(8);<br/>const view = new DataView(buffer);<br/>view.setInt32(0, 42);<br/>ws.send(buffer);</p>
<p>// Receive binary data<br/>ws.binaryType = 'arraybuffer';<br/>ws.onmessage = (event) => {<br/>  if (event.data instanceof ArrayBuffer) {<br/>    const view = new DataView(event.data);<br/>    console.log('Received number:', view.getInt32(0));<br/>  }<br/>};<br/>```</p>
<h3>3. Comparing Fetch and WebSocket</h3>
<p>| Feature | Fetch API | WebSocket |<br/>|---------|-----------|----------|<br/>| Protocol | HTTP/HTTPS | WS/WSS |<br/>| Connection | Request-Response | Full-duplex |<br/>| Realtime | No | Yes |<br/>| Overhead | High (each request) | Low (one connection) |<br/>| Used for | REST API, CRUD | Chat, Notification, Game |</p>
<h3>4. When to Use What?</h3>
<p><strong>Use Fetch API when</strong>:<br/>- Need to request/receive data on demand<br/>- Interacting with REST APIs<br/>- Don't need realtime updates</p>
<p><strong>Use WebSocket when</strong>:<br/>- Need bidirectional realtime communication<br/>- Chat applications, live notifications<br/>- Multiplayer games, live dashboards<br/>- Need low latency</p>
<p>Fetch API and WebSocket are two important tools in web development. Fetch API is suitable for regular HTTP tasks, while WebSocket is essential for realtime applications. Understanding the pros and cons of each technology helps you choose correctly in each situation.</p>
<p>In the next article, we'll explore how to build a TCP server with Node.js, the foundation for server-side realtime applications.</p>
<p>---</p>
<h3>References</h3>
<p>- [MDN Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)<br/>- [MDN WebSocket API](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)<br/>- [JavaScript.info - Fetch](https://javascript.info/fetch)<br/>- [JavaScript.info - WebSocket](https://javascript.info/websocket)</p>
    </article>
    <section class="social-section">
      <div class="social-container">
        <h2 data-i18n="social-title">X&#227; h&#7897;i</h2>
        <div class="social-grid">
          <a href="https://github.com/ThanhTra1409" target="_blank" class="social-card">
            <i class="fab fa-github social-icon"></i>
            <h3>GitHub</h3>
            <p>@nttra204</p>
          </a>
          <a href="https://www.facebook.com/nguyen.thanh.tra.970568?locale=vi_VN" target="_blank" class="social-card">
            <i class="fab fa-facebook social-icon"></i>
            <h3>Facebook</h3>
            <p>Nguy&#7877;n Thanh Tr&#224;</p>
          </a>
          <a href="https://www.instagram.com/nttra204_/?igsh=MXVlc3p1NG4zdnBidw%3D%3D&utm_source=qr" target="_blank" class="social-card">
            <i class="fab fa-instagram social-icon"></i>
            <h3>Instagram</h3>
            <p>@nttra204_</p>
          </a>
          <a href="https://www.linkedin.com/in/thanh-tra-nguyen-84a46833a" target="_blank" class="social-card">
            <i class="fab fa-linkedin social-icon"></i>
            <h3>LinkedIn</h3>
            <p>Nguy&#7877;n Thanh Tr&#224;</p>
          </a>
        </div>
      </div>
    </section>
  </main>
  <footer>
    <div class="footer-content">
      <div class="footer-brand">
        <h3 data-i18n="site-title">Nguy·ªÖn Thanh Tr√†</h3>
        <p class="footer-tagline" data-i18n="footer-tagline">Building scalable solutions with passion</p>
      </div>
      <div class="footer-contact">
        <h4 data-i18n="contact-info">Th&#244;ng tin li&#234;n h&#7879;</h4>
        <div class="contact-info-grid">
          <div class="contact-info-item">
            <i class="fas fa-envelope"></i>
            <a href="mailto:ntra140924@gmail.com">ntra140924@gmail.com</a>
          </div>
          <div class="contact-info-item">
            <i class="fas fa-phone"></i>
            <a href="tel:0941779093">0941779093</a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p><span data-i18n="footer-copyright">¬© 2025</span> <span data-i18n="site-title">Nguy·ªÖn Thanh Tr√†</span></p>
      </div>
    </div>
  </footer>
  <script src="/js/i18n.js"></script>
  <script>
  function toggleMenu(){
    document.body.classList.toggle('menu-open');
  }
  </script>
</body>
</html>